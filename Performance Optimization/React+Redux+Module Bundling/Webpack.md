## This is how `create-react-app` works in detail (using webpack)

```shell
mkdir webpack-project
cd webpack-project
npm init -y
mkdir dist
cd dist/
touch index.html
cd ..
npm install --save-dev webpack webpack-dev-server webpack-cli
```

### Index.html

```html
<!DOCTYPE html>
<html>
  <head>
    <title>Webpack</title>
  </head>
  <body>
    <h1>Webpack</h1>
    <div id="app"></div>
    <script src="/bundle.js"></script>
  </body>
</html>
```

### package.json

```json
{
	"scripts":{
		"start": "webpack-dev-server --config ./webpack.config.js --mode development"
	}
}
```
-----
```shell
touch webpack.config.js
```

### webpack.config.js

```javascript
module.exports = {
  entry: [
    './src/index.js'
  ],
  output: {
    path: __dirname + '/dist',
    publicPath: '/', //url to the output directory
    filename: 'bundle.js'
  },
  devServer: {
    contentBase: './dist'
  }
}
```
-----
```shell
mkdir src
cde src
touch index.js
cd ..
```

### index.js

```javascript
console.log('webpack wizard!!!');

```
-----
```shell
npm start
```

# Babel

Allows us to write code with ES6+ and transpiled to ES5 so that every (old) browser can read from it.

```shell
npm install --save-dev babel-core babel-loader babel-preset-env
```

**babel-loader** and webpack works to take JS through the babel compiler

**babel-preset-env** checks whatever browser we are running in and base on the browser's version to know which features they haven't implented yet. Then make those changes to ES5

```shell
npm install --save-dev babel-preset-stage-2 babel-preset-react
```

### package.json

```json
{
	"babel":{
		"presets": [
			"env",
			"stage-2",
			"react"
		]
	}
}
```

### webpack.config.js

```javascript
module.exports ={
  //previous config
  module: {
		rules: [
      {
        test: /\.(js|jsx)$/, //any file end with .js or .jsx
		    exclude: /node_modules/,
				use: ['babel-loader']
      }	
		]
	}
	resolve: {
  	extension: ['.js', '.jsx']
    //This make us whenever import js or jsx files we dont need to add .js and .jsx to the end
	}
}
```
-----
```shell
npm install react react-dom
npm install --save-dev install eslint eslint-loader
```

### webpack.config.js

```js
module.exports ={
  //previous config
  module: {
		rules: [
      //previous rules
      {
        test: /\.(js|jsx)$/, 
		    exclude: /node_modules/,
				use: ['eslint-loader']
      }
		]
	}
}
```
-----
```shell
touch .eslintrc
```

**rc** means when the project sets up, its going to read the eslintrc and set up eslint 

### .eslintrc

```json
{
	"rules": {
		//leave it blank for now, create this file just to make things working
	}
}
```
-----
```shell
npm install --save-dev install babel-eslint
```

### .eslintrc

```json
{
	parser: "babel-eslint",
	"rules": {
		"no-console": "warn"
    //we dont ant any console statements in JS file. However in index.js, there is a console.log. So it will give warning
    //or "no-console": "error" to give error
	}
}
```

------

```shell
npm install --save-dev eslint-config-airbnb eslint-plugin-import eslint-plugin-jsx-ally
```

### .eslintrc

```json
{
	//previous config
	"extends": ["airbnb-base"]
}
```

**Note: projects generated by `npx create-react-app` can be `npm run eject` to enable webpack.config file**

# Updating Libraries: Babel 7 + ESlint

## Babel

babel-preset-stage-2 is deprecated in Babel 7. Instead, we use

```shell
npm install --save-dev @babel/core @babel/preset-env @babel/preset-react babel-loader
```

### package.json

```json
{
	"babel":{
		"presets": [
			"@babel/preset-env:,
			"@babel/preset-react"
      //we use above instead of the previous one:
			//"env",
			//"stage-2",
			//"react"
		],
    "plugins": [
      //plugins go here
    ]
	}
}
```

## Eslint

```shell
npm install --save-dev eslint
```

The way create eslint file `touch .eslintrc` is deprecated. Use `touch .eslintrc.json` or `touch eslint.js` and so on instead. 

# Additional

 [Webpack configurator ](http://web.jakoblind.no/webpack-config/) is a useful tool to do webpack configuration

