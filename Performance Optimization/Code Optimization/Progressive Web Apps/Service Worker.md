# Service Worker

Main usage: make app running with offline

Other usage: background async, push notifications etc.

### index.js

```react
//Automatically generated by create-react-app.
//Change the unregister() to register() to get serviceWorkers by default

//To the very bottom line:
serviceWorker.register()
```

------

[Is Service Worker Ready?](https://jakearchibald.github.io/isserviceworkerready/): a website shows what browser support service worker.

### What do Service Worker do:

Check if browser support serviceWorker, if so, registration.

<img src="Service Worker.assets/Screen Shot 2021-07-01 at 4.15.48 PM.png" alt="Screen Shot 2021-07-01 at 4.15.48 PM" style="zoom:50%;" />

**service-worker.js**: created in the `build` folder folder by run `npm run build` in create-react-app

**Note: In development mode, we won't see service workers shown below. It can only be shown in production mode.**

<img src="Service Worker.assets/Screen Shot 2021-07-01 at 4.22.58 PM.png" alt="Screen Shot 2021-07-01 at 4.22.58 PM" style="zoom:50%;" />

### Worked as a network proxy:

<img src="Service Worker.assets/Screen Shot 2021-07-01 at 4.23.52 PM.png" alt="Screen Shot 2021-07-01 at 4.23.52 PM" style="zoom:50%;" />

1. Intercepts any request that made to the network, and check to see if it really need to communicate to the network.

2. After service worker get the request from user that need to open a new screen, tries to access to the Cache API. If the content exist in the Cache API, the service worker return the new page to user, regardless of network activity.
3. If the file does not exist in Cache API, then talking to the network and get these files.

<img src="Service Worker.assets/Screen Shot 2021-07-01 at 4.30.38 PM.png" alt="Screen Shot 2021-07-01 at 4.30.38 PM" style="zoom:50%;" />

### Resources:

Service Worker is implemented very easily into a react based project. You can see [this Git Diff](https://github.com/jeffposnick/create-react-pwa/compare/starting-point...pwa) to see what you would need to do to add service worker into an existing create react app project without the default service worker. 

For further information on the topics covered in the previous video:

[isServiceWorkerReady?](https://jakearchibald.github.io/isserviceworkerready/)

[More information on push notifications for those who want to see how it is implemented](https://auth0.com/blog/introduction-to-progressive-web-apps-push-notifications-part-3/)